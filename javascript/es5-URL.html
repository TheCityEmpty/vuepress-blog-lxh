<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>URL对象 | 江湖录</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="浏览器内置对象URL，用于解析url，绝大数浏览器都支持。">
    
    <link rel="preload" href="/vuepress-blog-lxh/assets/css/0.styles.253d253c.css" as="style"><link rel="preload" href="/vuepress-blog-lxh/assets/js/app.8d32188a.js" as="script"><link rel="preload" href="/vuepress-blog-lxh/assets/js/2.ae6c3983.js" as="script"><link rel="preload" href="/vuepress-blog-lxh/assets/js/18.ad92e712.js" as="script"><link rel="preload" href="/vuepress-blog-lxh/assets/js/9.fd4b449d.js" as="script"><link rel="preload" href="/vuepress-blog-lxh/assets/js/7.26863545.js" as="script"><link rel="preload" href="/vuepress-blog-lxh/assets/js/6.b516d596.js" as="script"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/10.362c3091.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/11.d9f79592.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/12.8d36d4e0.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/13.7663dd42.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/14.616766c6.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/15.a80cddf5.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/16.8d635d16.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/17.0e2f7697.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/19.9a616bcd.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/20.f70dd27d.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/21.ead17315.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/22.4adc24b8.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/23.741273c3.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/24.960c4de1.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/25.71255207.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/26.99bdf89d.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/27.a7cfdd9f.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/28.73ce90d6.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/29.86001c69.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/3.0d3a7d18.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/30.f7879cbd.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/31.378c1464.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/32.7569ba20.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/33.d86bcecd.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/34.f8189bcb.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/35.ca59a7c5.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/4.1c645c93.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/5.d5f27362.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/8.35a881dd.js">
    <link rel="stylesheet" href="/vuepress-blog-lxh/assets/css/0.styles.253d253c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vuepress-blog-lxh/" class="home-link router-link-active"><img src="/vuepress-blog-lxh/logo.svg" alt="江湖录" class="logo"> <span class="site-name can-hide">江湖录</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vuepress-blog-lxh/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/vuepress-blog-lxh/other-pages/category.html" class="nav-link">
  文章分类
</a></div> <a href="https://github.com/TheCityEmpty/vuepress-blog-lxh/tree/code" target="_blank" rel="noopener noreferrer" class="repo-link">
    github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/vuepress-blog-lxh/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/vuepress-blog-lxh/other-pages/category.html" class="nav-link">
  文章分类
</a></div> <a href="https://github.com/TheCityEmpty/vuepress-blog-lxh/tree/code" target="_blank" rel="noopener noreferrer" class="repo-link">
    github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>URL对象</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vuepress-blog-lxh/javascript/es5-URL.html#一个url应该由什么组成" class="sidebar-link">一个URL应该由什么组成</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuepress-blog-lxh/javascript/es5-URL.html#如何创建url对象" class="sidebar-link">如何创建URL对象</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuepress-blog-lxh/javascript/es5-URL.html#对于字符串的手动编码解码" class="sidebar-link">对于字符串的手动编码解码</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuepress-blog-lxh/javascript/es5-URL.html#使用url对象进行自动编码解码" class="sidebar-link">使用URL对象进行自动编码解码</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuepress-blog-lxh/javascript/es5-URL.html#url的方法" class="sidebar-link">URL的方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepress-blog-lxh/javascript/es5-URL.html#createobjecturl" class="sidebar-link">createObjectURL</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog-lxh/javascript/es5-URL.html#revokeobjecturl" class="sidebar-link">revokeObjectURL</a></li></ul></li><li><a href="/vuepress-blog-lxh/javascript/es5-URL.html#最后-看看兼容性吧" class="sidebar-link">最后，看看兼容性吧</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="url对象"><a href="#url对象" class="header-anchor">#</a> URL对象</h1> <p>URL是Web中的一个核心概念。它是浏览器用来检索web上公布的任何资源的机制。</p> <p>URL 的名称实际为 统一资源定位符（Uniform Resource Locator）。</p> <h2 id="一个url应该由什么组成"><a href="#一个url应该由什么组成" class="header-anchor">#</a> 一个URL应该由什么组成</h2> <img src="/vuepress-blog-lxh/1599273679(1).png" data-water="" alt="URL组成结构图" style="width:100%x;height:300px;"> <ul><li><p><code>href</code> 一个完整的URL地址</p></li> <li><p><code>origin</code>  由协议（protocol），域名（hostname），端口（post） 组成的源， 他是一个只读属性</p> <ul><li>对于 <code>http</code> 和 <code>https</code> 协议的URL，返回值就是 <code>http://www.baidu.com:222</code></li> <li>对于 <code>file:</code> 协议的 URL， 返回值应浏览器而异</li> <li>对于 <code>blob:</code> 协议的 URL， 返回值是 blob: 后跟随的源地址. 例如 <code>&quot;blob:https://www.baidu.com:222&quot;</code> 将会返回 <code>&quot;https://www.baidu.com:222&quot;</code></li></ul></li> <li><p><code>protocol</code> 协议， 常见的协议有 <code>http</code> <code>https</code> <code>ftp</code>, 协议表示我们可以通过不同的规则访问一个URl，前提是服务器支持该协议</p></li> <li><p><code>hostname</code> 域名，或者说是主机名。</p></li> <li><p><code>port</code> 端口号， 一般 <code>http</code> 的端口为 80 ，而 <code>https</code> 的端口为 443</p></li> <li><p><code>pathname</code> 路径</p></li> <li><p><code>search</code> 路由参数  以 <code>?</code> 开头</p></li> <li><p><code>hash</code> 哈希值  以 <code>#</code> 开头</p></li> <li><p>如果存在 HTTP 身份验证，则这里可能还会有 user 和 password 属性</p></li></ul> <h2 id="如何创建url对象"><a href="#如何创建url对象" class="header-anchor">#</a> 如何创建URL对象</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token punctuation">[</span>base<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><code>url</code> --- 完整的 URL，或者仅路径（如果设置了 base）</li> <li><code>base</code> --- 可选参数，如果设置了两个参数，则会根据两参数生成一个完整的Url</li></ul> <p>以下两个都是一样的值：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> u1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">'https://www.baidu.com/aa/bb'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> u2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">'/aa/bb'</span><span class="token punctuation">,</span> <span class="token string">'https://www.baidu.com'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>u1<span class="token punctuation">.</span>href<span class="token punctuation">,</span> u2<span class="token punctuation">.</span>href<span class="token punctuation">)</span>
<span class="token comment">// u1 -&gt; https://www.baidu.com/aa/bb</span>
<span class="token comment">// u2 -&gt; https://www.baidu.com/aa/bb</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>看看url 有哪些属性值： 发现这个内置对象 可以取出一个URL 的所有属性，可以很方便的处理URL。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> u1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">'https://www.baidu.com/aa/bb'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>u1<span class="token punctuation">)</span>
<span class="token comment">// {</span>
<span class="token comment">//   hash: &quot;&quot;</span>
<span class="token comment">//   host: &quot;www.baidu.com&quot;</span>
<span class="token comment">//   hostname: &quot;www.baidu.com&quot;</span>
<span class="token comment">//   href: &quot;https://www.baidu.com/aa/bb&quot;</span>
<span class="token comment">//   origin: &quot;https://www.baidu.com&quot;</span>
<span class="token comment">//   password: &quot;&quot;</span>
<span class="token comment">//   pathname: &quot;/aa/bb&quot;</span>
<span class="token comment">//   port: &quot;&quot;</span>
<span class="token comment">//   protocol: &quot;https:&quot;</span>
<span class="token comment">//   search: &quot;&quot;</span>
<span class="token comment">//   searchParams: URLSearchParams {}</span>
<span class="token comment">//   username: &quot;&quot;</span>
<span class="token comment">// }</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="对于字符串的手动编码解码"><a href="#对于字符串的手动编码解码" class="header-anchor">#</a> 对于字符串的手动编码解码</h2> <div class="custom-block warning"><p class="custom-block-title">提示</p> <p>在某项标准中规定了URL只能包含某些字符，而那些不合规的字符将会被转义。一般这种情况是针对于我们所带的参数中不合规的字符。这样导致在页面接受参数的时候发现参数和原参数对不上，被转义了。</p></div> <p>下面是个a链接，带了一个 a 参数，参数中有一个空格。</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code> <span class="token comment">&lt;!-- index.html --&gt;</span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cli.html?a=VSA UIO<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>跳转页面<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>发现在 <code>cli.html</code> 中取参数的时候， 空格变成了 <code>%20</code>, 那就有问题了，当我想拿参数进行处理的时候， 会发现对不上原始参数。</p> <p><strong>转义的规则是：根据操作系统的默认编码，将每个字节转为百分号（%）加上两个大写的十六进制字母。</strong></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code> <span class="token comment">&lt;!-- cli.html --&gt;</span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href<span class="token punctuation">)</span>
  <span class="token comment">// http://localhost:8082/cli.html?a=VSA%20UIO</span>
 </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>所以我们需要将参数进行手动编码 <code>encodeURI</code> 。在进行编码之后， 取值的时候应该要进行解码 <code>decodeURI</code>，这样就得到了正确的值。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> encodeURI <span class="token operator">=</span> <span class="token function">encodeURI</span><span class="token punctuation">(</span><span class="token string">'cli.html?a=VSA UIO'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>encodeURI<span class="token punctuation">)</span>
<span class="token comment">// cli.html?a=VSA%20UIO</span>
encodeURI <span class="token operator">=</span> <span class="token function">decodeURI</span><span class="token punctuation">(</span>encodeURI<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>encodeURI<span class="token punctuation">)</span>
<span class="token comment">// cli.html?a=VSA UIO</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>除此之外， 还有 <code>encodeURIComponent</code> 和 <code>decodeURIComponent</code> 编码方式。</p> <ul><li><code>encodeURI</code> 编码整个 URL</li> <li><code>decodeURI</code> 解码为编码前的状态</li> <li><code>encodeURIComponent</code> 编码 URL 组件，例如搜索参数，或者 hash，或者 pathname</li> <li><code>decodeURIComponent</code> 解码为编码前的状态</li></ul> <p>那两个编码方法有什么区别呢？</p> <p>下面有一个全面的URL地址：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>baidu<span class="token punctuation">.</span>com<span class="token operator">:</span><span class="token number">8080</span><span class="token operator">/</span>path<span class="token operator">/</span>page<span class="token operator">?</span>p1<span class="token operator">=</span>v1<span class="token operator">&amp;</span>p2<span class="token operator">=</span>v2#hash
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>可以发现在URL中 <code>:</code> <code>.</code> <code>/</code> <code>?</code> <code>=</code> <code>&amp;</code> <code>#</code> 这类字符是被允许的。</p> <p>合法字符分为两类：</p> <p><strong>URL元字符：</strong> 分号<code>;</code> 逗号<code>,</code> 斜杆<code>/</code> 问好<code>?</code> 冒号<code>:</code> at符<code>@</code> and符<code>&amp;</code> 等于号<code>=</code> 加号<code>+</code> 美元符<code>$</code></p> <p><strong>语义字符：</strong> 井号<code>#</code> 连接符号<code>-</code> 下划线<code>_</code> 点<code>.</code> 感叹号<code>!</code> 波浪号<code>~</code> 星号<code>*</code> 单引号<code>'</code> 圆括号<code>()</code> 最后还有 大小写字母<code>a-z A-Z</code> 和 阿拉伯数字 <code>0-9</code></p> <p>为啥要分两类呢？<code>encodeURI</code> 方法只会转编码合法字符之外的其他字符， <code>encodeURIComponent</code> 则会编码URL元字符之外的字符。</p> <p>如果你想传一个参数 <code>12&amp;123</code> 怎么办， 它会把 <code>&amp;</code> 当成参数分隔符。 和你的本意不同，这样， 我们就是使用 <code>encodeURIComponent</code> 进行参数编码。</p> <p>下面的代码我们将 <code>p1</code> 参数取出， 并使用 <code>decodeURIComponent</code> 方法解码， 就得到了原来的值。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> params <span class="token operator">=</span> <span class="token function">encodeURIComponent</span><span class="token punctuation">(</span><span class="token string">'12&amp;123'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://www.baidu.com:8080/path/page?p1=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>params<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;a=1</span><span class="token template-punctuation string">`</span></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
<span class="token comment">// https://www.baidu.com:8080/path/page?p1=12%26123&amp;a=1</span>

<span class="token keyword">const</span> arr <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">([^&amp;?])+(=)([^&amp;])+</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>
<span class="token comment">//  [&quot;p1=12%26123&quot;, &quot;a=1&quot;]</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'='</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// [&quot;p1&quot;, &quot;12%26123&quot;]</span>


<span class="token keyword">const</span> p1 <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'='</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span>
<span class="token comment">// 12%26123</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">decodeURIComponent</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// 12&amp;123</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="使用url对象进行自动编码解码"><a href="#使用url对象进行自动编码解码" class="header-anchor">#</a> 使用URL对象进行自动编码解码</h2> <p>上面我们使用 <code>encodeURIComponent</code> 和 <code>decodeURIComponent</code> 进行手动编码， 下面我们用 <code>URL</code> 对象进行自动编码。</p> <p><code>URL</code> 对象下面有个属性为 <code>searchParams</code>，使用它可以进行对参数的各种处理。</p> <p>（提示： <code>searchParams</code> 其实是 <code>URLSearchParams</code>(window 下面的内置对象， 和URL对象一样) 的实例，两者的用法也是一样的。）</p> <ul><li><p><strong><code>append</code> 方法：</strong> <code>new URL(url).searchParams.append('p1', '12&amp;123')</code>  往 url 里添加 属性名为 p1, 属性值为 12&amp;123 的参数，对于 属性值 <strong>该方法会自动进行编码</strong>。</p></li> <li><p><strong><code>get</code> 方法：</strong> <code>new URL(url).searchParams.get('p1')</code>  从 url 里取出 属性名为 p1 的参数值， <strong>该方法会自动进行解码</strong></p></li> <li><p><strong><code>delete</code> 方法：</strong> <code>new URL(url).searchParams.delete('a')</code>  从 url 里删除 属性名为 p1 的参数</p></li> <li><p><strong><code>has</code> 方法：</strong> <code>new URL(url).searchParams.has('p1')</code>  url 中是否有 p1 参数， 返回 <code>true</code> 或 <code>false</code></p></li> <li><p><strong><code>set</code> 方法：</strong>  有两种功能，，分别是 添加新参数 和 替换旧参数</p> <ul><li><code>new URL(url).searchParams.set('p2', '00000')</code> 往 url 里添加 属性名为 p2，属性值为 00000 的参数</li> <li><code>new URL(url).searchParams.set('p1', '11111')</code> 从 url 将属性名为 p1的属性值替换为 00000</li></ul></li> <li><p><strong><code>getAll</code> 方法：</strong> <code>new URL(url).searchParams.getAll('p1')</code></p></li></ul> <p><code>append</code> 方法允许插入相同属性名甚至相同属性值参数， 但是使用 <code>get</code> 方法的时候只能取第一个 <code>p1</code> 的值。这个时候我们就需要 <code>getAll</code> 方法， 它会取出所有的 <code>p1</code> 的值。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://www.baidu.com:8080/path/page</span><span class="token template-punctuation string">`</span></span>

<span class="token keyword">let</span> urlObj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
urlObj<span class="token punctuation">.</span>searchParams<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'p1'</span><span class="token punctuation">,</span> <span class="token string">'12&amp;123'</span><span class="token punctuation">)</span>
urlObj<span class="token punctuation">.</span>searchParams<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'p1'</span><span class="token punctuation">,</span> <span class="token string">'12&amp;123'</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>urlObj<span class="token punctuation">.</span>search<span class="token punctuation">)</span>
<span class="token comment">// ?p1=12%26123&amp;p1=12%26123  一样的属性名 和 一样的属性值 是可行的</span>


<span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://www.baidu.com:8080/path/page</span><span class="token template-punctuation string">`</span></span>

<span class="token keyword">let</span> urlObj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
urlObj<span class="token punctuation">.</span>searchParams<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'p1'</span><span class="token punctuation">,</span> <span class="token string">'12&amp;123'</span><span class="token punctuation">)</span>
urlObj<span class="token punctuation">.</span>searchParams<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'p1'</span><span class="token punctuation">,</span> <span class="token string">'000000'</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>urlObj<span class="token punctuation">.</span>search<span class="token punctuation">)</span>
<span class="token comment">// ?p1=12%26123&amp;p1=000000</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>urlObj<span class="token punctuation">.</span>searchParams<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'p1'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// 12&amp;123   只会取第一个值</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>urlObj<span class="token punctuation">.</span>searchParams<span class="token punctuation">.</span><span class="token function">getAll</span><span class="token punctuation">(</span><span class="token string">'p1'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">//  [&quot;12&amp;123&quot;, &quot;000000&quot;]  返回一个数组</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><ul><li><strong><code>keys</code> 方法：</strong> <code>new URL(url).searchParams.keys()</code>   生成一个包含参数属性名的迭代器</li> <li><strong><code>values</code> 方法：</strong> <code>new URL(url).searchParams.values()</code>   生成一个包含参数属性值的迭代器</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://www.baidu.com:8080/path/page</span><span class="token template-punctuation string">`</span></span>
<span class="token keyword">let</span> urlObj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
urlObj<span class="token punctuation">.</span>searchParams<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'p1'</span><span class="token punctuation">,</span> <span class="token string">'213'</span><span class="token punctuation">)</span>
urlObj<span class="token punctuation">.</span>searchParams<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'p2'</span><span class="token punctuation">,</span> <span class="token string">'421'</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">of</span> urlObj<span class="token punctuation">.</span>searchParams<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
  <span class="token comment">// p1</span>
  <span class="token comment">// p2</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li><strong><code>new URL(url).searchParams</code> 本身就是一个迭代器，拥有 <code>forEach</code> 方法， 和数组的 <code>forEach</code> 方法一样的使用</strong></li></ul> <h2 id="url的方法"><a href="#url的方法" class="header-anchor">#</a> URL的方法</h2> <p>这两个静态方法是相辅相成的， 一个是在内存中创建 URL 对象， 一个是 在内存中释放 URL 对象。</p> <h3 id="createobjecturl"><a href="#createobjecturl" class="header-anchor">#</a> <code>createObjectURL</code></h3> <p>使用方法 <code>window.URL.createObjectURL(object)</code>, 用于创建 URL 的 File 对象、Blob 对象或者 MediaSource 对象。</p> <h3 id="revokeobjecturl"><a href="#revokeobjecturl" class="header-anchor">#</a> <code>revokeObjectURL</code></h3> <p>使用方法 <code>window.URL.revokeObjectURL(objectURL)</code>, 用来释放一个之前已经存在的、通过调用 <code>URL.createObjectURL()</code> 创建的 URL 对象。</p> <h2 id="最后-看看兼容性吧"><a href="#最后-看看兼容性吧" class="header-anchor">#</a> 最后，看看兼容性吧</h2> <p>除了 <code>IE</code> 不支持， 其他的浏览器基本都支持， 可以放心在 移动端使用了。
<div class="use" style="grid-template-columns:repeat(0, 78px);" data-v-e31f4846><div class="use-option" data-v-477211cf><h4 class="browser-header" data-v-477211cf>IE</h4> <div class="released-versions" data-v-477211cf><div class="versions-box" data-v-477211cf><span class="stat-cell" data-v-477211cf></span></div><div class="versions-box" data-v-477211cf><span class="stat-cell" data-v-477211cf></span></div><div class="versions-box" data-v-477211cf><span class="stat-cell false-cell" data-v-477211cf>6-10</span></div><div class="versions-box" data-v-477211cf><span class="stat-cell false-cell" data-v-477211cf>11</span></div></div></div> <div class="use-option" data-v-477211cf><h4 class="browser-header" data-v-477211cf>Edge</h4> <div class="released-versions" data-v-477211cf><div class="versions-box" data-v-477211cf><span class="stat-cell" data-v-477211cf></span></div><div class="versions-box" data-v-477211cf><span class="stat-cell" data-v-477211cf></span></div><div class="versions-box" data-v-477211cf><span class="stat-cell true-cell" data-v-477211cf>12-83</span></div><div class="versions-box" data-v-477211cf><span class="stat-cell true-cell" data-v-477211cf>84</span></div></div></div> <div class="use-option" data-v-477211cf><h4 class="browser-header" data-v-477211cf>Firefox</h4> <div class="released-versions" data-v-477211cf><div class="versions-box" data-v-477211cf><span class="stat-cell false-cell" data-v-477211cf>2-25</span></div><div class="versions-box" data-v-477211cf><span class="stat-cell true-cell" data-v-477211cf>26-79</span></div><div class="versions-box" data-v-477211cf><span class="stat-cell true-cell" data-v-477211cf>80</span></div><div class="versions-box" data-v-477211cf><span class="stat-cell true-cell" data-v-477211cf>81-82</span></div></div></div> <div class="use-option" data-v-477211cf><h4 class="browser-header" data-v-477211cf>Chrome</h4> <div class="released-versions" data-v-477211cf><div class="versions-box" data-v-477211cf><span class="stat-cell false-cell" data-v-477211cf>4-22</span></div><div class="versions-box" data-v-477211cf><span class="stat-cell false-cell" data-v-477211cf>23-31</span></div><div class="versions-box" data-v-477211cf><span class="stat-cell true-cell" data-v-477211cf>32-84</span></div><div class="versions-box" data-v-477211cf><span class="stat-cell true-cell" data-v-477211cf>85</span></div><div class="versions-box" data-v-477211cf><span class="stat-cell true-cell" data-v-477211cf>86-88</span></div></div></div> <div class="use-option" data-v-477211cf><h4 class="browser-header" data-v-477211cf>Safari</h4> <div class="released-versions" data-v-477211cf><div class="versions-box" data-v-477211cf><span class="stat-cell false-cell" data-v-477211cf>3.1-6.1</span></div><div class="versions-box" data-v-477211cf><span class="stat-cell false-cell" data-v-477211cf>7</span></div><div class="versions-box" data-v-477211cf><span class="stat-cell true-cell" data-v-477211cf>7.1-13</span></div><div class="versions-box" data-v-477211cf><span class="stat-cell true-cell" data-v-477211cf>13.1</span></div><div class="versions-box" data-v-477211cf><span class="stat-cell true-cell" data-v-477211cf>14-TP</span></div></div></div> <div class="use-option" data-v-477211cf><h4 class="browser-header" data-v-477211cf>Opera</h4> <div class="released-versions" data-v-477211cf><div class="versions-box" data-v-477211cf><span class="stat-cell false-cell" data-v-477211cf>10-12.1</span></div><div class="versions-box" data-v-477211cf><span class="stat-cell false-cell" data-v-477211cf>15-18</span></div><div class="versions-box" data-v-477211cf><span class="stat-cell true-cell" data-v-477211cf>19 - 69</span></div><div class="versions-box" data-v-477211cf><span class="stat-cell true-cell" data-v-477211cf>70</span></div></div></div></div></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">10/14/2022, 4:05:31 PM</span></div></footer> <!----> </main></div><div class="global-ui"><div class="footer-box" style="padding-left:20rem;" data-v-497fb04d><div class="footer-left" data-v-497fb04d><h2 class="footer-title" data-v-497fb04d><span class="logo-icon" data-v-497fb04d><img src="/vuepress-blog-lxh/assets/img/logo.664df77c.svg" data-v-497fb04d></span>
      江湖录 | <span class="small-tip" data-v-497fb04d>孤独的人的江湖路</span></h2> <p data-v-497fb04d>本站点所有图片图标资源尽皆都是百度来的， 如有侵权，立删！</p> <p data-v-497fb04d>联系email: lxhaweb@163.com</p></div> <div class="footer-right" data-v-497fb04d></div></div><!----></div></div>
    <script src="/vuepress-blog-lxh/assets/js/app.8d32188a.js" defer></script><script src="/vuepress-blog-lxh/assets/js/2.ae6c3983.js" defer></script><script src="/vuepress-blog-lxh/assets/js/18.ad92e712.js" defer></script><script src="/vuepress-blog-lxh/assets/js/9.fd4b449d.js" defer></script><script src="/vuepress-blog-lxh/assets/js/7.26863545.js" defer></script><script src="/vuepress-blog-lxh/assets/js/6.b516d596.js" defer></script>
  </body>
</html>
