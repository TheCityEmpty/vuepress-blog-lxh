<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>学习electron | 江湖录</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="学习electron">
    
    <link rel="preload" href="/vuepress-blog-lxh/assets/css/0.styles.253d253c.css" as="style"><link rel="preload" href="/vuepress-blog-lxh/assets/js/app.8d32188a.js" as="script"><link rel="preload" href="/vuepress-blog-lxh/assets/js/2.ae6c3983.js" as="script"><link rel="preload" href="/vuepress-blog-lxh/assets/js/17.0e2f7697.js" as="script"><link rel="preload" href="/vuepress-blog-lxh/assets/js/6.b516d596.js" as="script"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/10.362c3091.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/11.d9f79592.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/12.8d36d4e0.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/13.7663dd42.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/14.616766c6.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/15.a80cddf5.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/16.8d635d16.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/18.ad92e712.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/19.9a616bcd.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/20.f70dd27d.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/21.ead17315.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/22.4adc24b8.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/23.741273c3.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/24.960c4de1.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/25.71255207.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/26.99bdf89d.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/27.a7cfdd9f.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/28.73ce90d6.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/29.86001c69.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/3.0d3a7d18.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/30.f7879cbd.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/31.378c1464.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/32.7569ba20.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/33.d86bcecd.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/34.f8189bcb.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/35.ca59a7c5.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/4.1c645c93.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/5.d5f27362.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/7.26863545.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/8.35a881dd.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/9.fd4b449d.js">
    <link rel="stylesheet" href="/vuepress-blog-lxh/assets/css/0.styles.253d253c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vuepress-blog-lxh/" class="home-link router-link-active"><img src="/vuepress-blog-lxh/logo.svg" alt="江湖录" class="logo"> <span class="site-name can-hide">江湖录</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vuepress-blog-lxh/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/vuepress-blog-lxh/other-pages/category.html" class="nav-link">
  文章分类
</a></div> <a href="https://github.com/TheCityEmpty/vuepress-blog-lxh/tree/code" target="_blank" rel="noopener noreferrer" class="repo-link">
    github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/vuepress-blog-lxh/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/vuepress-blog-lxh/other-pages/category.html" class="nav-link">
  文章分类
</a></div> <a href="https://github.com/TheCityEmpty/vuepress-blog-lxh/tree/code" target="_blank" rel="noopener noreferrer" class="repo-link">
    github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>学习electron</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vuepress-blog-lxh/javascript/electron.js-1.html#运行第一个桌面端程序" class="sidebar-link">运行第一个桌面端程序</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuepress-blog-lxh/javascript/electron.js-1.html#相比于传统的web页面-electron-该如何来调试呢" class="sidebar-link">相比于传统的web页面，electron 该如何来调试呢</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepress-blog-lxh/javascript/electron.js-1.html#渲染进程的调试" class="sidebar-link">渲染进程的调试</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog-lxh/javascript/electron.js-1.html#主进程的调试-使用浏览器进行调试" class="sidebar-link">主进程的调试（使用浏览器进行调试）</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog-lxh/javascript/electron.js-1.html#主进程的调试-使用vs-code工具进行调试" class="sidebar-link">主进程的调试（使用vs code工具进行调试）</a></li></ul></li><li><a href="/vuepress-blog-lxh/javascript/electron.js-1.html#看下文档-了解下相应的api" class="sidebar-link">看下文档，了解下相应的api</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuepress-blog-lxh/javascript/electron.js-1.html#现在我们可以开始做一个项目了" class="sidebar-link">现在我们可以开始做一个项目了</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepress-blog-lxh/javascript/electron.js-1.html#_1-好歹是做过很多项目的-得先把文件结构分好。" class="sidebar-link">1. 好歹是做过很多项目的， 得先把文件结构分好。</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog-lxh/javascript/electron.js-1.html#_2-开始写ui吧" class="sidebar-link">2. 开始写UI吧</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog-lxh/javascript/electron.js-1.html#_3-还是先整合vue进去吧" class="sidebar-link">3. 还是先整合vue进去吧</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="学习electron"><a href="#学习electron" class="header-anchor">#</a> 学习electron</h1> <h2 id="运行第一个桌面端程序"><a href="#运行第一个桌面端程序" class="header-anchor">#</a> 运行第一个桌面端程序</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">git</span> clone https://github.com/electron/electron-quick-start

<span class="token builtin class-name">cd</span> electron-quick-start

<span class="token comment"># 国内无法连接上， 使用淘宝镜像（使用前请先安装淘宝镜像）</span>
<span class="token function">npm</span> config <span class="token builtin class-name">set</span> ELECTRON_MIRROR https://npm.taobao.org/mirrors/electron/

<span class="token function">npm</span> <span class="token function">install</span>

<span class="token function">npm</span> start

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="相比于传统的web页面-electron-该如何来调试呢"><a href="#相比于传统的web页面-electron-该如何来调试呢" class="header-anchor">#</a> 相比于传统的web页面，electron 该如何来调试呢</h2> <p>在此以前， 我们需要了解 <strong>一个electron程序由有且只有一个主进程和若干多个渲染进程组成</strong>。</p> <p>主进程由 <code>main.js</code> 中的代码组成，渲染进程由 <code>html</code> 后缀的代码组成，比如上面的示例代码中的 <code>index.html</code>。</p> <h3 id="渲染进程的调试"><a href="#渲染进程的调试" class="header-anchor">#</a> 渲染进程的调试</h3> <p>当你成功启动electron程序时，会弹出一个页面。页面上有若干的导航栏， 点击 <code>View</code>，再点击 <code>Toggle Developer Tools</code>。这时就会弹出和谷歌浏览器一样的 <code>console</code> 调试器。当然你也可以使用快捷键 <code>Ctrl + Shift + i</code> 来打开调试器。</p> <h3 id="主进程的调试-使用浏览器进行调试"><a href="#主进程的调试-使用浏览器进行调试" class="header-anchor">#</a> 主进程的调试（使用浏览器进行调试）</h3> <p>这时我们需要修改 <code>package.json</code>，设置 5858 端口。然后再重新运行程序。</p> <div class="language-json line-numbers-mode"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><br></div><pre class="language-json"><code>  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    -- <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;electron .&quot;</span>
    ++ <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;electron --inspect=5858 .&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>接着我们需要打开谷歌浏览器，输入网址 <code>chrome://inspect/</code>。</p> <p>在打开的界面中我们可以看到两个按钮 <code>Port forwarding...</code> 和 <code>Configure...</code>。</p> <p>点击 <code>Configure...</code> 会出现一个输入 ip 和 port 的弹窗。</p> <p>我们输入 <code>localhost:5858</code>。 点击 <code>done</code>。</p> <p>重新运行程序。</p> <p>最后界面如下：
<img src="/vuepress-blog-lxh/electron-1.png" data-water="" alt="chrome://inspect/图" style="width:100%x;height:300px;"></p> <p>出现了 <code>Remote Target</code> 即为成功。点击 <code>inspect</code> ，就会出现 <code>debbug</code> 窗口。</p> <p>然后点击 <code>Sources</code> 源代码标签页。就会出现 <code>main.js</code> 中的代码。这时候你就可以开始在 <code>main.js</code> 断点代码了。</p> <p><strong>如果点击<code>Sources</code> 源代码标签页并未出现<code>main.js</code> 中的代码，那就点击三个点， 点击 <code>Open file</code>去搜索文件，输入 <code>main.js</code>即可搜索到。</strong></p> <img src="/vuepress-blog-lxh/electron-2.png" data-water="" alt="调试界面图" style="width:100%x;height:300px;"> <h3 id="主进程的调试-使用vs-code工具进行调试"><a href="#主进程的调试-使用vs-code工具进行调试" class="header-anchor">#</a> 主进程的调试（使用vs code工具进行调试）</h3> <p>点击 <code>vs code</code> 右边导航栏中的运行标签， 也可以使用快捷键 <code>Ctrl + Shift + D</code>。这时就会出现调试界面， 点击绿色箭头就可以开始调试，这时你就可以去 <code>main.js</code> 中设置断点了。</p> <img src="/vuepress-blog-lxh/electron-3.png" data-water="" alt="vscode图" style="width:100%x;height:300px;"> <h2 id="看下文档-了解下相应的api"><a href="#看下文档-了解下相应的api" class="header-anchor">#</a> 看下文档，了解下相应的api</h2> <p>看完文档，很多都忘记了。但是却记住了下面几条重要的东西：</p> <ol><li><code>Node.js</code> 中所有内置模块和第三方模块 在 Electron 中都支持。</li> <li>注意：要从渲染过程中访问Node.js API，您需要设置 nodeIntegration 选项为 true。</li></ol> <p>Node.js API 包含了 <code>require</code> 模块， <code>process</code> 信息， <code>fs</code> 模块，<code>path</code> 模块等。所以我可以理解， 这个一定要设置。</p> <ol start="3"><li><p>Electron API是根据流程类型分配的。这意味这某些模块或API只能在主进程或渲染进程使用，有些可以在两者中使用。Electron 的 API 文档指明了每个模块可以使用的过程。所以有时候你发现API没用，那看下文档吧。</p></li> <li><p>在 Electron 中，通信是十分重要的。比如主进程和渲染进程通信，不同的渲染进程之间的通信。而通信有两种方式进行通信。分别是 <code>ipcMain</code> 和 <code>ipcRenderer</code> 通信模块。下面有个渲染进程和主进程通信的示例：</p></li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 主进程</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> ipcMain <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'electron'</span><span class="token punctuation">)</span>

ipcMain<span class="token punctuation">.</span><span class="token function">handle</span><span class="token punctuation">(</span><span class="token string">'tel'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">evidence<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 在渲染进程中</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> ipcRenderer <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'electron'</span><span class="token punctuation">)</span>

ipcRenderer<span class="token punctuation">.</span><span class="token function">invotrake</span><span class="token punctuation">(</span><span class="token string">'tel'</span><span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>可以发现和 <code>events</code> 通信有点相似。任意命名一个相同的字符串， 通过 <code>ipcMain</code> 创建监听器， <code>ipcRenderer</code> 触发监听器。</p> <ol start="5"><li>主进程和渲染进程的区别，只有主进程可以和 <code>GUI</code> 或底层系统打交道， 而渲染进程除了额外能够使用 Node.js 能力之外，与普通网页没区别。</li></ol> <p>看了下文档，太多了，简单说一下大概功能：</p> <p><strong>主进程模块</strong></p> <ul><li>app -&gt; 控制应用程序的事件生命周期，相当于整个程序的实例。</li> <li>autoUpdater -&gt; 控制程序的自动更新</li> <li>BrowserView -&gt; 创建新页面的</li> <li>BrowserWindow -&gt; 创建和控制浏览器窗口</li> <li>contentTracing -&gt; 内容跟踪，以发现性能瓶颈和缓慢的操作</li> <li>dialog -&gt; 显示用于打开和保存文件、警报等的本机系统对话框</li> <li>globalShortcut -&gt; 创建全局快捷键方式</li> <li>inAppPurchase -&gt; Mac App Store中的应用内购买相关</li> <li>ipcMain -&gt; 通信模块，从主进程到渲染进程的异步通信</li> <li>Menu -&gt; 顶部菜单相关</li> <li>MenuItem -&gt; 顶部菜单项相关</li> <li>net -&gt; 使用Chromium的原生网络库发出HTTP / HTTPS请求</li> <li>netLog -&gt; 网络事件日志的记录</li> <li>nativeTheme -&gt; 读取并响应Chromium本地色彩主题中的变化</li> <li>Notification -&gt; 创建OS(操作系统)桌面通知，比如有新的版本要更新了，有人发消息给你了等等...</li> <li>powerMonitor -&gt; 监视电源状态的改变</li> <li>powerSaveBlocker -&gt; 阻止系统进入低功耗 (休眠) 模式</li> <li>protocol -&gt; 注册自定义协议并拦截基于现有协议的请求</li> <li>screen -&gt; 检索有关屏幕大小、显示器、光标位置等的信息</li> <li>session -&gt; 管理浏览器会话、cookie、缓存、代理设置等</li> <li>systemPreferences -&gt; 获取system preferences</li> <li>TouchBar -&gt; 为原生macOS应用创建TouchBar布局</li> <li>Tray -&gt; 添加图标和上下文菜单到系统通知区</li> <li>webContents -&gt; 渲染以及控制 web 页面</li></ul> <p><strong>渲染进程模块</strong></p> <ul><li>desktopCapturer -&gt; 可以访问那些用于从桌面上捕获音频和视频的媒体源信息</li> <li>ipcRenderer -&gt; 从渲染器进程到主进程的异步通信</li> <li>remote -&gt; 可以让我们在在渲染进程中使用主进程模块</li> <li>webFrame -&gt; 自定义渲染当前网页</li></ul> <p><strong>两种进程都可以用模块</strong></p> <ul><li>clipboard -&gt; 在系统剪贴板上执行复制和粘贴操作</li> <li>crashReporter -&gt; 将崩溃日志提交给远程服务器</li> <li>nativeImage -&gt; 使用 PNG 或 JPG 文件创建托盘、dock和应用程序图标</li> <li>shell -&gt; 使用默认应用程序管理文件和 url</li></ul> <p><strong>我们是需要大概了解下所有的api的，以便在开发的时候知道去哪查看文档！</strong></p> <h2 id="现在我们可以开始做一个项目了"><a href="#现在我们可以开始做一个项目了" class="header-anchor">#</a> 现在我们可以开始做一个项目了</h2> <p>想了很久， 就做一个个人管理器吧， 就是类似于一个<code>windows</code> 系统，然后很多功能集成在里面。没事，慢慢写...</p> <p>因为写着写着你就会发现，好多报错，哈哈哈</p> <h3 id="_1-好歹是做过很多项目的-得先把文件结构分好。"><a href="#_1-好歹是做过很多项目的-得先把文件结构分好。" class="header-anchor">#</a> 1. 好歹是做过很多项目的， 得先把文件结构分好。</h3> <p>首先分出一个文件夹<code>views</code>存放web界面的，这个文件夹将专门管理渲染界面。</p> <p><code>views</code> 下面的每一个文件夹都有三个文件，分别是 <code>html</code>, <code>css</code>, <code>renderer.js</code> 文件，对应着一个渲染进程。</p> <p>如下图所示：</p> <img src="/vuepress-blog-lxh/electron-4.png" data-water="" alt="文件结构目录图" style="width:100%x;height:300px;"> <p>记住： 这时你也要更改 <code>main.js</code> 中的路径，它第一次打开界面所指路径。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// main.js</span>

<span class="token operator">--</span> mainWindow<span class="token punctuation">.</span><span class="token function">loadFile</span><span class="token punctuation">(</span><span class="token string">'index.html'</span><span class="token punctuation">)</span>
<span class="token operator">++</span> mainWindow<span class="token punctuation">.</span><span class="token function">loadFile</span><span class="token punctuation">(</span><span class="token string">'./views/index/index.html'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>然后再创建一些别的文件夹对应别的功能，比如 <code>config</code> 全局配置，<code>utils</code> 工具类，<code>ipc</code> 进程通信 等对应别的功能。</p> <h3 id="_2-开始写ui吧"><a href="#_2-开始写ui吧" class="header-anchor">#</a> 2. 开始写UI吧</h3> <p><strong>然后就发现了一个问题，在 <code>html</code> 文件中 <code>style</code> 标签和元素的 <code>style</code> 属性一旦写了就直接报错了。</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 报错信息</span>

Refused to apply inline style because it violates the following Content Security Policy directive<span class="token operator">:</span> <span class="token string">&quot;default-src 'self'&quot;</span><span class="token punctuation">.</span> 
Either the <span class="token string">'unsafe-inline'</span> keyword<span class="token punctuation">,</span> a <span class="token function">hash</span> <span class="token punctuation">(</span><span class="token string">'sha256-47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU='</span><span class="token punctuation">)</span><span class="token punctuation">,</span> or a <span class="token function">nonce</span> <span class="token punctuation">(</span><span class="token string">'nonce-...'</span><span class="token punctuation">)</span> is 
required to enable inline execution<span class="token punctuation">.</span> Note also that <span class="token string">'style-src'</span> was not explicitly set<span class="token punctuation">,</span> so <span class="token string">'default-src'</span> is used <span class="token keyword">as</span> a fallback<span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>当然你也用 <code>css</code> 文件来避免这个报错， 不使用<code>style</code> 标签和元素的 <code>style</code> 属性。</p> <p>但是也有别的解决办法：</p> <p>修改下 <code>html</code> 文件的 <code>meta</code> 标签即可。</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- ./views/index/index.html --&gt;</span> 
-- <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Content-Security-Policy<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>default-src <span class="token punctuation">'</span>self<span class="token punctuation">'</span>; script-src <span class="token punctuation">'</span>self<span class="token punctuation">'</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
++ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Content-Security-Policy<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>default-src <span class="token punctuation">'</span>self<span class="token punctuation">'</span> <span class="token punctuation">'</span>unsafe-inline<span class="token punctuation">'</span>; script-src <span class="token punctuation">'</span>self<span class="token punctuation">'</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_3-还是先整合vue进去吧"><a href="#_3-还是先整合vue进去吧" class="header-anchor">#</a> 3. 还是先整合vue进去吧</h3> <p>突然还是发现 <code>vue</code> 够香，所以使用了 <code>electron-vue</code> 搭建项目。</p> <p><code>electron-vue</code> 文档 <a href="https://simulatedgreg.gitbooks.io/electron-vue/content/cn/" target="_blank" rel="noopener noreferrer">https://simulatedgreg.gitbooks.io/electron-vue/content/cn/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 安装 vue-cli 和 脚手架样板代码</span>
<span class="token function">npm</span> <span class="token function">install</span> -g vue-cli
vue init simulatedgreg/electron-vue my-project

<span class="token comment"># 安装依赖并运行你的程序</span>
<span class="token builtin class-name">cd</span> my-project
<span class="token function">yarn</span> <span class="token comment"># 或者 npm install</span>
<span class="token function">yarn</span> run dev <span class="token comment"># 或者 npm run dev</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>安装完之后就可以开始运行了， 运行时出现了一个问题：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>ReferenceError<span class="token operator">:</span> process is not defined
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>解决方案：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 文件目录 .electron-vue/webpack.web.config.js</span>
plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">VueLoaderPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>filename<span class="token operator">:</span> <span class="token string">'styles.css'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      filename<span class="token operator">:</span> <span class="token string">'index.html'</span><span class="token punctuation">,</span>
      template<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../src/index.ejs'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
     <span class="token operator">++</span> <span class="token function">templateParameters</span><span class="token punctuation">(</span><span class="token parameter">compilation<span class="token punctuation">,</span> assets<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token operator">++</span>  <span class="token keyword">return</span> <span class="token punctuation">{</span>
     <span class="token operator">++</span>     compilation<span class="token operator">:</span> compilation<span class="token punctuation">,</span>
     <span class="token operator">++</span>     webpack<span class="token operator">:</span> compilation<span class="token punctuation">.</span><span class="token function">getStats</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
     <span class="token operator">++</span>     webpackConfig<span class="token operator">:</span> compilation<span class="token punctuation">.</span>options<span class="token punctuation">,</span>
     <span class="token operator">++</span>     htmlWebpackPlugin<span class="token operator">:</span> <span class="token punctuation">{</span>
     <span class="token operator">++</span>       files<span class="token operator">:</span> assets<span class="token punctuation">,</span>
     <span class="token operator">++</span>       options<span class="token operator">:</span> options
     <span class="token operator">++</span>     <span class="token punctuation">}</span><span class="token punctuation">,</span>
     <span class="token operator">++</span>     process<span class="token punctuation">,</span>
     <span class="token operator">++</span>   <span class="token punctuation">}</span><span class="token punctuation">;</span>
     <span class="token operator">++</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      minify<span class="token operator">:</span> <span class="token punctuation">{</span>
        collapseWhitespace<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        removeAttributeQuotes<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        removeComments<span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>


   <span class="token comment">// 文件目录 .electron-vue/webpack.renderer.config.js</span>
plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">VueLoaderPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>filename<span class="token operator">:</span> <span class="token string">'styles.css'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      filename<span class="token operator">:</span> <span class="token string">'index.html'</span><span class="token punctuation">,</span>
      template<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../src/index.ejs'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
     <span class="token operator">++</span> <span class="token function">templateParameters</span><span class="token punctuation">(</span><span class="token parameter">compilation<span class="token punctuation">,</span> assets<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token operator">++</span>  <span class="token keyword">return</span> <span class="token punctuation">{</span>
     <span class="token operator">++</span>     compilation<span class="token operator">:</span> compilation<span class="token punctuation">,</span>
     <span class="token operator">++</span>     webpack<span class="token operator">:</span> compilation<span class="token punctuation">.</span><span class="token function">getStats</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
     <span class="token operator">++</span>     webpackConfig<span class="token operator">:</span> compilation<span class="token punctuation">.</span>options<span class="token punctuation">,</span>
     <span class="token operator">++</span>     htmlWebpackPlugin<span class="token operator">:</span> <span class="token punctuation">{</span>
     <span class="token operator">++</span>       files<span class="token operator">:</span> assets<span class="token punctuation">,</span>
     <span class="token operator">++</span>       options<span class="token operator">:</span> options
     <span class="token operator">++</span>     <span class="token punctuation">}</span><span class="token punctuation">,</span>
     <span class="token operator">++</span>     process<span class="token punctuation">,</span>
     <span class="token operator">++</span>   <span class="token punctuation">}</span><span class="token punctuation">;</span>
     <span class="token operator">++</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      minify<span class="token operator">:</span> <span class="token punctuation">{</span>
        collapseWhitespace<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        removeAttributeQuotes<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        removeComments<span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>   
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br></div></div><p>再次运行，就可以了。</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">10/14/2022, 4:05:31 PM</span></div></footer> <!----> </main></div><div class="global-ui"><div class="footer-box" style="padding-left:20rem;" data-v-497fb04d><div class="footer-left" data-v-497fb04d><h2 class="footer-title" data-v-497fb04d><span class="logo-icon" data-v-497fb04d><img src="/vuepress-blog-lxh/assets/img/logo.664df77c.svg" data-v-497fb04d></span>
      江湖录 | <span class="small-tip" data-v-497fb04d>孤独的人的江湖路</span></h2> <p data-v-497fb04d>本站点所有图片图标资源尽皆都是百度来的， 如有侵权，立删！</p> <p data-v-497fb04d>联系email: lxhaweb@163.com</p></div> <div class="footer-right" data-v-497fb04d></div></div><!----></div></div>
    <script src="/vuepress-blog-lxh/assets/js/app.8d32188a.js" defer></script><script src="/vuepress-blog-lxh/assets/js/2.ae6c3983.js" defer></script><script src="/vuepress-blog-lxh/assets/js/17.0e2f7697.js" defer></script><script src="/vuepress-blog-lxh/assets/js/6.b516d596.js" defer></script>
  </body>
</html>
