<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>学习bash | 江湖录</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="让我们的程序自动化起来。">
    
    <link rel="preload" href="/vuepress-blog-lxh/assets/css/0.styles.253d253c.css" as="style"><link rel="preload" href="/vuepress-blog-lxh/assets/js/app.8d32188a.js" as="script"><link rel="preload" href="/vuepress-blog-lxh/assets/js/2.ae6c3983.js" as="script"><link rel="preload" href="/vuepress-blog-lxh/assets/js/15.a80cddf5.js" as="script"><link rel="preload" href="/vuepress-blog-lxh/assets/js/6.b516d596.js" as="script"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/10.362c3091.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/11.d9f79592.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/12.8d36d4e0.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/13.7663dd42.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/14.616766c6.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/16.8d635d16.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/17.0e2f7697.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/18.ad92e712.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/19.9a616bcd.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/20.f70dd27d.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/21.ead17315.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/22.4adc24b8.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/23.741273c3.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/24.960c4de1.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/25.71255207.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/26.99bdf89d.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/27.a7cfdd9f.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/28.73ce90d6.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/29.86001c69.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/3.0d3a7d18.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/30.f7879cbd.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/31.378c1464.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/32.7569ba20.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/33.d86bcecd.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/34.f8189bcb.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/35.ca59a7c5.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/4.1c645c93.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/5.d5f27362.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/7.26863545.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/8.35a881dd.js"><link rel="prefetch" href="/vuepress-blog-lxh/assets/js/9.fd4b449d.js">
    <link rel="stylesheet" href="/vuepress-blog-lxh/assets/css/0.styles.253d253c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vuepress-blog-lxh/" class="home-link router-link-active"><img src="/vuepress-blog-lxh/logo.svg" alt="江湖录" class="logo"> <span class="site-name can-hide">江湖录</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vuepress-blog-lxh/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/vuepress-blog-lxh/other-pages/category.html" class="nav-link">
  文章分类
</a></div> <a href="https://github.com/TheCityEmpty/vuepress-blog-lxh/tree/code" target="_blank" rel="noopener noreferrer" class="repo-link">
    github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/vuepress-blog-lxh/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/vuepress-blog-lxh/other-pages/category.html" class="nav-link">
  文章分类
</a></div> <a href="https://github.com/TheCityEmpty/vuepress-blog-lxh/tree/code" target="_blank" rel="noopener noreferrer" class="repo-link">
    github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>学习bash</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vuepress-blog-lxh/bash/bash-base.html#_1-什么是shell脚本" class="sidebar-link">1. 什么是Shell脚本</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuepress-blog-lxh/bash/bash-base.html#_2-开发一个shell脚本" class="sidebar-link">2. 开发一个Shell脚本</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepress-blog-lxh/bash/bash-base.html#_1-脚本解释器" class="sidebar-link">（1） 脚本解释器</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog-lxh/bash/bash-base.html#_2-echo-命令" class="sidebar-link">（2） echo 命令</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog-lxh/bash/bash-base.html#_3-read-命令" class="sidebar-link">（3） read 命令</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog-lxh/bash/bash-base.html#_1-read-t-3-commitmsg" class="sidebar-link" style="padding-left:3rem;">[1.] read -t 3 commitMsg</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog-lxh/bash/bash-base.html#_2-read-s-commitmsg" class="sidebar-link" style="padding-left:3rem;">[2.] read -s commitMsg</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog-lxh/bash/bash-base.html#_4-多种运行脚本的方法" class="sidebar-link">（4） 多种运行脚本的方法</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog-lxh/bash/bash-base.html#_1-bash-sh" class="sidebar-link" style="padding-left:3rem;">[1.] ./bash.sh</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog-lxh/bash/bash-base.html#_2-bash-bash-sh" class="sidebar-link" style="padding-left:3rem;">[2.] bash bash.sh</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog-lxh/bash/bash-base.html#_3-bash-sh" class="sidebar-link" style="padding-left:3rem;">[3.] . bash.sh</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog-lxh/bash/bash-base.html#_5-单双引号的意义" class="sidebar-link">（5） 单双引号的意义</a></li></ul></li><li><a href="/vuepress-blog-lxh/bash/bash-base.html#_3-优化一个shell脚本-学习更多的-bash-脚本语法" class="sidebar-link">3. 优化一个Shell脚本，学习更多的 bash 脚本语法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepress-blog-lxh/bash/bash-base.html#_1-set-命令" class="sidebar-link">（1） set 命令</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog-lxh/bash/bash-base.html#_1-set-u" class="sidebar-link" style="padding-left:3rem;">[1.] set -u</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog-lxh/bash/bash-base.html#_2-set-x" class="sidebar-link" style="padding-left:3rem;">[2.] set -x</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog-lxh/bash/bash-base.html#_2-特殊变量" class="sidebar-link">（2） 特殊变量</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog-lxh/bash/bash-base.html#_3-条件判断" class="sidebar-link">（3） 条件判断</a></li></ul></li><li><a href="/vuepress-blog-lxh/bash/bash-base.html#_4-看看别的语法" class="sidebar-link">4. 看看别的语法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepress-blog-lxh/bash/bash-base.html#_1-export语法-和-运行子进程" class="sidebar-link">（1）export语法 和 运行子进程</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog-lxh/bash/bash-base.html#_2-for循环-数组" class="sidebar-link">（2）for循环，&amp;&amp; ，数组</a></li><li class="sidebar-sub-header"><a href="/vuepress-blog-lxh/bash/bash-base.html#结语-bash-脚本还有很多很多的知识点-这些只是一部分。学习了bash-后发现-bash-语法比较严格-有些地方不能有空格有些地方又一定要有-有些地方要写单引号有些地方要写双引号-比较难搞。而且报错不太好排除。共勉" class="sidebar-link" style="padding-left:3rem;">结语：bash 脚本还有很多很多的知识点，这些只是一部分。学习了bash 后发现，bash 语法比较严格， 有些地方不能有空格有些地方又一定要有， 有些地方要写单引号有些地方要写双引号，比较难搞。而且报错不太好排除。共勉！</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="学习bash"><a href="#学习bash" class="header-anchor">#</a> 学习bash</h1> <h2 id="_1-什么是shell脚本"><a href="#_1-什么是shell脚本" class="header-anchor">#</a> 1. 什么是Shell脚本</h2> <p><code>Shell</code> 是命令行环境， <code>Shell</code> 这个单词的原意是“外壳”，，即用户跟电脑内核交互的对话界面。而 <code>Bash</code> 是 <code>Unix</code> 系统和 <code>Linux</code> 系统的一种 <code>Shell</code>（命令行环境），是目前绝大多数 <code>Linux</code> 发行版的默认 <code>Shell</code>。平常我们使用的 <code>git</code> 工具就是一种 <code>Shell</code> 。 如果你安装了 <code>git</code> ， 右击桌面点击 <code>Git Bash Here</code>，即可打开一个 <code>Shell</code> (命令行工具)。</p> <img src="/vuepress-blog-lxh/1596791116.png" data-water="" alt="git程序" style="width:500px;height:300px;"> <p>在这里面我们可以输入 <code>git</code> 常用的命令，如 <code>git push</code> 上传代码， <code>git pull</code> 下载代码， <code>git clone http...</code> 克隆代码等。我们也可以输入 <code>linux</code> 命令，如 <code>clear</code> 清除当前页面， <code>rm aa.txt</code> 删除 aa.txt文件等命令。</p> <p>可以看到上面有一群字母， 含义分别为 <code>Administrator</code> 是用户名（user）， <code>@</code> 是分隔符， <code>WIN-1PTBJBO8FDV</code> 是主机名（hostname）， <code>~/Desktop</code> 是当前目录，也就是桌面。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>Administrator@WIN-1PTBJBO8FDV MINGW64 ~/Desktop
$
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>进入到这个界面，一般来说就算是已经打开的了 <code>bash</code> 。如果没有打开则可以使用 <code>bash</code> 命令打开，如果打开了，使用 <code>bash</code> 命令可以开启一个子 <code>bash</code> 。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">bash</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>而相应的 <code>exit</code> 命令可以退出当前的 <code>bash</code>，如果你已经是子 <code>bash</code> 了，则退出到上一级父 <code>bash</code> 中，否则他会退出当前的 <code>git</code> 程序。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">exit</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>如果你想查看当前 <code>bash</code> 版本，可以使用 <code>bash --version</code> 命令。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">bash</span> --version
// 记住， 不能简写为 <span class="token function">bash</span> -v 哦
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>🙄 🙄 🙄</p> <h2 id="_2-开发一个shell脚本"><a href="#_2-开发一个shell脚本" class="header-anchor">#</a> 2. 开发一个Shell脚本</h2> <p>如何来开发并运行一个我们期待效果的 <code>shell</code> 脚本呢？</p> <p>一般来说，<code>shell</code> 脚本的文件名采用 <code>.sh</code> 结尾，比如 <code>deploy.sh</code>，这样就是一个 <code>shell</code> 脚本。</p> <p>而运行的话我们在 <code>package.json</code> 中的  <code>scripts</code> 中添加一项， 执行 <code>npm run bash</code> 这样就运行了一个 <code>shell</code> 脚本。</p> <div class="language-js line-numbers-mode"><div class="highlight-lines"><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br></div><pre class="language-js"><code><span class="token comment">// package.json 文件</span>
<span class="token punctuation">{</span>
  <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vuepress-blog-lxh&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;index.js&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;bash&quot;</span><span class="token operator">:</span> <span class="token string">&quot;bash deploy.sh&quot;</span>
  <span class="token punctuation">}</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>平常我们上传代码到仓库的时候需要自己执行多条命令才能上传成功。现在就可以写一个 <code>shell</code> 脚本一行命令执行这项操作。</p> <p><code>deploy.sh 文件</code></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/usr/bin/env bash</span>

<span class="token builtin class-name">echo</span> <span class="token string">'检查变动文件-&gt;'</span>
<span class="token function">git</span> status

<span class="token builtin class-name">echo</span> <span class="token string">'将所有变动文件添加到缓存区-&gt;'</span>
<span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>

<span class="token builtin class-name">echo</span> <span class="token string">'请输入commit消息-&gt;'</span>
<span class="token builtin class-name">read</span> commitMsg
<span class="token function">git</span> commit -m <span class="token variable">$commitMsg</span>

<span class="token builtin class-name">echo</span> <span class="token string">'将代码推入到远程分支-&gt;'</span>
<span class="token function">git</span> push

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>接下来我们去执行这个 <code>bash</code> 文件， 我们也可以在 <code>bash.sh</code> 文件的当前目录下在命令行工具中执行 <code>bash bash.sh</code> 也是可以的。(在vscode中去执行的)</p> <img src="/vuepress-blog-lxh/1597026802.png" data-water="" alt="bash bash.sh 执行情况" style="width:723px;height:529px;"> <p>发现代码已经上传成功了。接下来我们来看下上面代码的含义。</p> <h3 id="_1-脚本解释器"><a href="#_1-脚本解释器" class="header-anchor">#</a> （1） 脚本解释器</h3> <p>可以看下下面的 6 行解释器， <code>#!</code>是特殊的表示符，其后面跟的是解释此脚本的脚本解释器shell的路径。</p> <p>一般来说是这样写法， 表示 告诉操作系统在执行这个脚本的时候，调用/usr/bin下的bash解释器</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/usr/bin/bash</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>而这种写法是为了防止操作系统用户没有将 <code>bash</code> 装在默认的 <code>/usr/bin</code> 路径里。当系统看到这一行的时候，首先会到 <code>env</code> 设置里查找 <code>bash</code> 的安装路径，再调用对应路径下的解释器程序完成操作。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/usr/bin/env bash</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><details class="custom-block details"><summary>有兴趣的同学可以搜索下 sh 和 bash 的关系。刚好我有点兴趣，所以给大家总结一下网上的说法。</summary> <ol><li>两者没什么差别，类似于 <code>javascrip</code> 和 <code>typescript</code> 的区别。 <code>sh</code> 是一种规范而不是一种实现。</li> <li><code>sh</code> 是 <code>bash</code> 简化版</li> <li><code>sh</code> 是 <code>bash</code> 的连接， 执行 <code>sh</code> 最终会指向 <code>bash</code>。</li></ol></details> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/usr/bin/env sh</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/usr/bin/sh</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这个是调用了 <code>node</code> 解释器，和上面的一样。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/usr/bin/env node</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/usr/bin/node</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="custom-block warning"><p class="custom-block-title">提示</p> <p>#!与脚本解释器之间有没有空格，都是可以的。</p> <p>脚本解释器行不是必须的， 但最好加上。原因是如果不加需要自己主动调用相应的解释器去执行。但是我发现好像不主动调用也可以，可能是电脑设置了啥环境变量吧。</p></div> <p>脚本执行的另一种方式 (不主动调用)<code>./bash.sh</code> ，发现也可以执行相应的脚本。如果不加脚本解释器的话，需要下面这种执行：</p> <p>主动调用 <code>bash</code> 或者 <code>/user/bin/sh</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>bash bash.sh
# 或者 /user/bin/sh ./bash.sh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_2-echo-命令"><a href="#_2-echo-命令" class="header-anchor">#</a> （2） echo 命令</h3> <p><code>echo</code> 命令类似于 <code>js</code> 中的 <code>console.log()</code>， 输出后面的 字符串 变量 啥的。</p> <h3 id="_3-read-命令"><a href="#_3-read-命令" class="header-anchor">#</a> （3） read 命令</h3> <p><code>read</code> 命令是 让我们在中途可以操控程序的方法。</p> <p>脚本执行到这条命令之后会暂停执行，显示可输入光标，在你输入后按下 <code>enter</code> 确认键， 脚本就会接着往下执行。</p> <p><code>read</code> 后面可以接一个变量名字，将用户所输入的文字赋值给这个变量。然后下一条脚本我们就可以使用该变量了。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">read</span> commitMsg
<span class="token function">git</span> commit -m <span class="token variable">$commitMsg</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>这里其实相当于创建了一个 <code>commitMsg</code> 变量， 然后用 <code>$commitMsg</code> 来使用这个变量。读取变量直接在变量前面加入 <code>$</code> 符号就可以了。</p> <p>当然 <code>read</code> 命令还有很多的用法， 后面可以接 参数代表不同的含义，</p> <p>比如 ：</p> <h4 id="_1-read-t-3-commitmsg"><a href="#_1-read-t-3-commitmsg" class="header-anchor">#</a> [1.] <code>read -t 3 commitMsg</code></h4> <p>表示超时 3秒 后用户还没输入， 脚本放弃等待， 继续向下执行。</p> <h4 id="_2-read-s-commitmsg"><a href="#_2-read-s-commitmsg" class="header-anchor">#</a> [2.] <code>read -s commitMsg</code></h4> <p>表示不把用户输入的文字显示在屏幕中，常常用于密码的输入。</p> <p>具体的可以参考：
<a href="https://wangdoc.com/bash/read.html" target="_blank" rel="noopener noreferrer">阮一峰的bash教程中的read用法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>这样我们就完成了一个脚本的开发， 其他的语法都是 <code>git</code> 中的语法，无关 <code>bash</code>。</p> <h3 id="_4-多种运行脚本的方法"><a href="#_4-多种运行脚本的方法" class="header-anchor">#</a> （4） 多种运行脚本的方法</h3> <h4 id="_1-bash-sh"><a href="#_1-bash-sh" class="header-anchor">#</a> [1.] <code>./bash.sh</code></h4> <p>如果使用 <code>#!</code> 指定了解析器，就使用指定解析器执行，如果没有使用系统默认的解析器，一般来说默认的解析器就是 <code>sh</code>。</p> <h4 id="_2-bash-bash-sh"><a href="#_2-bash-bash-sh" class="header-anchor">#</a> [2.] <code>bash bash.sh</code></h4> <p>指定解析器来执行，如何指定的解析器 <code>bash</code> 不存在还是会使用默认的解析器</p> <h4 id="_3-bash-sh"><a href="#_3-bash-sh" class="header-anchor">#</a> [3.] <code>. bash.sh</code></h4> <p>注意： 点后面有一个空格；
直接使用默认解析器解析</p> <h3 id="_5-单双引号的意义"><a href="#_5-单双引号的意义" class="header-anchor">#</a> （5） 单双引号的意义</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/usr/bin/env sh</span>

<span class="token assign-left variable">num</span><span class="token operator">=</span><span class="token number">200</span>

<span class="token builtin class-name">echo</span> <span class="token string">&quot;num=<span class="token variable">$num</span>&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">'num=$num'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>输出结果为：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>$ . bash.sh
num=200
num=$num
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>可以发现双引号中的变量会被解释，但是单引号里面会当做字符串解释。</p> <h2 id="_3-优化一个shell脚本-学习更多的-bash-脚本语法"><a href="#_3-优化一个shell脚本-学习更多的-bash-脚本语法" class="header-anchor">#</a> 3. 优化一个Shell脚本，学习更多的 <code>bash</code> 脚本语法</h2> <p>在改代码之前，我去 <code>github</code> 上修改了我的仓库， 这样就会使得在我本地修改之后想 <code>push</code> 会造成冲突。
我们将代码改为下面的样子。 然后执行命令 <code>bash -x bash.sh '测试冲突'</code> 。</p> <div class="language-bash line-numbers-mode"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><div class="highlighted"> </div><br><br><div class="highlighted"> </div><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><div class="highlighted"> </div><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br></div><pre class="language-bash"><code><span class="token shebang important">#!/usr/bin/env sh</span>

<span class="token builtin class-name">set</span> -u

<span class="token function">git</span> status
<span class="token builtin class-name">echo</span> <span class="token string">'检查变动文件-&gt;'</span> + <span class="token variable">$?</span>

<span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>
<span class="token builtin class-name">echo</span> <span class="token string">'将所有变动文件添加到缓存区-&gt;'</span> + <span class="token variable">$?</span>

<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$1</span> <span class="token punctuation">]</span> <span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token function">git</span> commit -m <span class="token variable">$1</span>
  <span class="token keyword">else</span>
    <span class="token builtin class-name">read</span> commitMsg
    <span class="token function">git</span> commit -m <span class="token variable">$commitMsg</span>
  <span class="token keyword">fi</span>

<span class="token function">git</span> push

<span class="token assign-left variable">pushRes</span><span class="token operator">=</span><span class="token variable">$?</span>
<span class="token builtin class-name">echo</span> <span class="token string">'将代码推入到远程分支息-&gt;'</span> + <span class="token variable">$pushRes</span>

<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$pushRes</span> <span class="token operator">=</span> <span class="token string">'1'</span> <span class="token punctuation">]</span> <span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token function">git</span> pull
  <span class="token builtin class-name">echo</span> <span class="token string">'代码有冲突， 请在本地修改，修改完继续执行此条命令 bash bash.sh'</span>
<span class="token keyword">fi</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h3 id="_1-set-命令"><a href="#_1-set-命令" class="header-anchor">#</a> （1） <code>set</code> 命令</h3> <p><code>set</code> 命令是 <code>Bash</code> 脚本的重要环节，却常常被忽视，导致脚本的安全性和可维护性出问题。 <code>set</code> 命令用来修改 <code>Shell</code> 环境的运行参数，即定制环境。</p> <h4 id="_1-set-u"><a href="#_1-set-u" class="header-anchor">#</a> [1.] <code>set -u</code></h4> <p>执行下面脚本时，会发现 <code>$a</code> 是个不存在的变量。但是脚本不会报错， <code>$a</code> 被输出为一个空行了。
大多数情况下，这不是开发者想要的行为，遇到变量不存在，脚本应该报错，而不是一声不响地往下执行。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token variable">$a</span>
<span class="token builtin class-name">echo</span> <span class="token string">'哈哈哈'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>而 <code>set -u</code> 的含义就是 遇到不存在的变量就会停止运行脚本， 抛出错误。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">set</span> -u
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_2-set-x"><a href="#_2-set-x" class="header-anchor">#</a> [2.] <code>set -x</code></h4> <p>通常情况下， 执行脚本只会输出 <code>echo</code> 打印的数据， 其他的并不会输出， 遇见有判断分支的，不断去打印判断走哪条分支比较麻烦。 可以使用此命令， 每执行一条命令都会打印一条字符串，<code>+该命令的字符</code> 。比如执行下面脚本：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">'aa'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>输出：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">+</span>echo <span class="token string">'aa'</span>
aa
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>在调试阶段非常好用， 而之前我运行的命令 <code>bash -x bash.sh '测试冲突'</code> 中的 <code>-x</code> 参数也是和 <code>set -x</code> 一样的效果。</p> <h3 id="_2-特殊变量"><a href="#_2-特殊变量" class="header-anchor">#</a> （2） 特殊变量</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">set</span> -u

<span class="token comment"># $? 为上一个命令的退出码，用来判断命令是否成功，0则表示成功， 非0则 表示执行失败</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$?</span>

<span class="token comment"># $0 为当前 Shell 的名称（在命令行直接执行时）或者脚本名（在脚本中执行时）</span>
<span class="token comment"># 而 $1 ~ $9 分别对应脚本的第一个参数到第九个参数</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$0</span>

<span class="token comment"># $# 参数的总数</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$#</span>

<span class="token comment"># $@ 全部的参数，参数之间使用空格分隔</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$@</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>而在我优化脚本中， 使用了 <code>$?</code> 判断 <code>git push</code> 是否执行成功。 使用 <code>$1</code> 读取 <code>bash -x bash.sh '测试冲突'</code> 执行命令中的第一个参数 <code>'测试冲突'</code> ，将其赋值给pushRes。</p> <div class="custom-block danger"><p class="custom-block-title">创建变量并赋值</p> <p><code>pushRes=$?</code> 等号旁边切记不能有空格， 有时我们写习惯了 <code>eslint</code> 校验的代码， 下意识的会在等号两边加入空格。在 <code>bash</code> 中是不正确的。 如果要在等号右边赋值带有空格的字符串则需要，这样写 <code>pushRes='aa bb cc '</code></p></div> <h3 id="_3-条件判断"><a href="#_3-条件判断" class="header-anchor">#</a> （3） 条件判断</h3> <p>类似于 <code>js</code> 中的 <code>if (布尔值) {}</code>， 在 <code>bash</code> 中的写法有四种：</p> <p>而一些命令也可以充当这个布尔值， 成功则执行 <code>then</code>。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token keyword">if</span> 布尔值 <span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token comment"># todo</span>
<span class="token keyword">fi</span>

<span class="token keyword">if</span> <span class="token punctuation">[</span>布尔值<span class="token punctuation">]</span> <span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token comment"># todo</span>
<span class="token keyword">fi</span>

<span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>布尔值<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token comment"># todo</span>
<span class="token keyword">fi</span>

<span class="token keyword">if</span> <span class="token builtin class-name">test</span> 布尔值 <span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token comment"># todo</span>
<span class="token keyword">fi</span>

<span class="token comment"># 命令充当这个布尔值</span>
<span class="token keyword">if</span> <span class="token builtin class-name">cd</span> <span class="token function">dirname</span> <span class="token punctuation">;</span><span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">'哦哦'</span> <span class="token comment"># 如果 `cd dirname` 执行成功了 则会输出 '哦哦'</span>
<span class="token keyword">fi</span>

<span class="token comment"># `if` 后面可以接多条命令， 但是判断真伪只看最后一条命令，即使前面的命令都失败， 最后一条命令成功了， 就会执行 </span>
<span class="token comment"># `then` 的部分</span>
<span class="token keyword">if</span> <span class="token builtin class-name">cd</span> aa<span class="token punctuation">;</span><span class="token builtin class-name">cd</span> bb<span class="token punctuation">;</span> <span class="token boolean">true</span> <span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">'true'</span> <span class="token comment"># 试图打开 不存在的 aa 和 bb 目录， 自然会执行失败，但是最后一条命令是 true 则会走 `then` 的部分</span>
<span class="token keyword">fi</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h2 id="_4-看看别的语法"><a href="#_4-看看别的语法" class="header-anchor">#</a> 4. 看看别的语法</h2> <h3 id="_1-export语法-和-运行子进程"><a href="#_1-export语法-和-运行子进程" class="header-anchor">#</a> （1）<code>export</code>语法 和 运行子进程</h3> <p>在脚本实现很多功能的时候可能会分成好几个脚本，比如下面的代码：</p> <p>将打包后的文件上传到master分支，将源代码上传到code分支。每次上传代码都需要填写 commit message，于是使用 <code>export</code> 语法将接受来的 <code>$commitMsg</code> 变量传递到 子进程中。</p> <p>使用 <code>./gitCode.sh</code> 运行一个子进程， 当然其他两种语法也是可以运行的 <code>. gitCode.sh</code> <code>bash gitCode.sh</code></p> <h5 id="gitmaster-sh"><a href="#gitmaster-sh" class="header-anchor">#</a> &gt;gitMaster.sh</h5> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/usr/bin/env sh</span>

<span class="token builtin class-name">set</span> -e
<span class="token builtin class-name">cd</span> dist
<span class="token function">git</span> init
<span class="token function">git</span> remote <span class="token function">add</span> origin https://github.com/TheCityEmpty/vuepress-blog-lxh.git

<span class="token builtin class-name">echo</span> <span class="token string">'更新远程分支....'</span>
<span class="token function">git</span> fetch
<span class="token builtin class-name">echo</span> <span class="token string">'更新完成的分支：'</span>
<span class="token function">git</span> branch -a

<span class="token comment"># 将打包文件直接添加进缓冲区</span>
<span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>
<span class="token builtin class-name">read</span> commitMsg
<span class="token function">git</span> commit -m <span class="token variable">$commitMsg</span>

<span class="token builtin class-name">echo</span> <span class="token string">'将本地master 分支关联远程master分支'</span>
<span class="token function">git</span> branch --set-upstream-to<span class="token operator">=</span>origin/master master
<span class="token builtin class-name">echo</span> <span class="token string">'强制push, 替换掉打包文件'</span>
<span class="token function">git</span> push -f

<span class="token builtin class-name">cd</span> <span class="token punctuation">..</span>/
<span class="token builtin class-name">echo</span> <span class="token string">'正在删除dist文件夹目录...'</span>
<span class="token function">rm</span> -fr dist
<span class="token builtin class-name">echo</span> <span class="token string">'博客已更新！'</span>
<span class="token builtin class-name">export</span> commitMsg

./gitCode.sh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h5 id="gitcode-sh"><a href="#gitcode-sh" class="header-anchor">#</a> &gt;gitCode.sh</h5> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code> <span class="token comment">#! /bin/sh</span>

 <span class="token builtin class-name">set</span> -e
 <span class="token builtin class-name">echo</span> <span class="token string">'开始更新code分支代码'</span>
 <span class="token function">git</span> status
 <span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>
 <span class="token function">git</span> commit -m <span class="token variable">$commitMsg</span>
 <span class="token builtin class-name">echo</span> trying to push to origin master<span class="token punctuation">..</span>.
 <span class="token function">git</span> push

 <span class="token builtin class-name">echo</span> <span class="token string">'代码已经打包并上传成功....'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>在子进程中是可以修改传递过来的变量的， 修改后是不会影响父进程。</p> <h5 id="parent-sh"><a href="#parent-sh" class="header-anchor">#</a> parent.sh</h5> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">a</span><span class="token operator">=</span><span class="token string">'aa'</span>
./child.sh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h5 id="child-sh"><a href="#child-sh" class="header-anchor">#</a> child.sh</h5> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token assign-left variable">a</span><span class="token operator">=</span><span class="token string">'ccc'</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$a</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>输出结果为：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>$ bash parent.sh
ccc
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_2-for循环-数组"><a href="#_2-for循环-数组" class="header-anchor">#</a> （2）<code>for</code>循环，<code>&amp;&amp;</code> ，数组</h3> <p>下面是一段获取文件夹下面文件名的脚本。</p> <p>假如我们的文件目录是这样的:</p> <hr> <img src="/vuepress-blog-lxh/1597222407.png" data-water="" alt="git程序" style="width:500px;height:300px;"> <hr> <p>我们想获取 <code>bash</code> 文件夹和 <code>javascript</code> 文件夹下面的去文件后缀的文件名</p> <blockquote><p>create-ls.sh</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/usr/bin/env sh</span>
<span class="token builtin class-name">set</span> -u

<span class="token assign-left variable">f</span><span class="token operator">=</span><span class="token string">'./docs'</span>
<span class="token comment"># 获取 docs 文件夹下的文件</span>
<span class="token assign-left variable">fs</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">ls</span> $f<span class="token variable">)</span></span>
<span class="token comment"># 遍历 $fs 变量</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">filename</span> <span class="token keyword">in</span> <span class="token variable">$fs</span><span class="token punctuation">;</span>
<span class="token keyword">do</span>
  <span class="token comment"># 判断文件名字 记住每个 布尔表达式 都要用 [ true ] 包裹， 并且要包含空格。</span>
  <span class="token comment">#  `[&quot;$filename&quot; != &quot;other-pages&quot;]` 这样没有空格就会报错</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$filename</span>&quot;</span> <span class="token operator">!=</span> <span class="token string">&quot;other-pages&quot;</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$filename</span>&quot;</span> <span class="token operator">!=</span> <span class="token string">&quot;README.md&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token assign-left variable">currentFiles</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">ls</span> <span class="token string">&quot;<span class="token variable">$f</span>/<span class="token variable">$filename</span>&quot;</span><span class="token variable">)</span></span>
    <span class="token keyword">for</span> <span class="token for-or-select variable">cFilename</span> <span class="token keyword">in</span> <span class="token variable">$currentFiles</span><span class="token punctuation">;</span>
    <span class="token keyword">do</span>
      <span class="token comment"># cFilename 变量在这里不能加 $ 符号 否则报错</span>
      <span class="token assign-left variable">fileArr</span><span class="token operator">+=</span><span class="token punctuation">(</span><span class="token variable">${cFilename<span class="token operator">%%</span>.*}</span><span class="token punctuation">)</span>
    <span class="token keyword">done</span>
      <span class="token comment"># 变成空字符串 相当于销毁了这个变量</span>
    <span class="token assign-left variable">currentFiles</span><span class="token operator">=</span><span class="token string">''</span>
  <span class="token keyword">fi</span>
<span class="token keyword">done</span>

<span class="token comment"># 输出这个数组的所有值</span>
<span class="token builtin class-name">echo</span>  <span class="token variable">${fileArr<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h4 id="结语-bash-脚本还有很多很多的知识点-这些只是一部分。学习了bash-后发现-bash-语法比较严格-有些地方不能有空格有些地方又一定要有-有些地方要写单引号有些地方要写双引号-比较难搞。而且报错不太好排除。共勉"><a href="#结语-bash-脚本还有很多很多的知识点-这些只是一部分。学习了bash-后发现-bash-语法比较严格-有些地方不能有空格有些地方又一定要有-有些地方要写单引号有些地方要写双引号-比较难搞。而且报错不太好排除。共勉" class="header-anchor">#</a> 结语：bash 脚本还有很多很多的知识点，这些只是一部分。学习了bash 后发现，bash 语法比较严格， 有些地方不能有空格有些地方又一定要有， 有些地方要写单引号有些地方要写双引号，比较难搞。而且报错不太好排除。共勉！</h4> <hr> <p>参考资料：</p> <p><a href="https://wangdoc.com/bash" target="_blank" rel="noopener noreferrer">阮一峰的bash教程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">10/14/2022, 4:05:31 PM</span></div></footer> <!----> </main></div><div class="global-ui"><div class="footer-box" style="padding-left:20rem;" data-v-497fb04d><div class="footer-left" data-v-497fb04d><h2 class="footer-title" data-v-497fb04d><span class="logo-icon" data-v-497fb04d><img src="/vuepress-blog-lxh/assets/img/logo.664df77c.svg" data-v-497fb04d></span>
      江湖录 | <span class="small-tip" data-v-497fb04d>孤独的人的江湖路</span></h2> <p data-v-497fb04d>本站点所有图片图标资源尽皆都是百度来的， 如有侵权，立删！</p> <p data-v-497fb04d>联系email: lxhaweb@163.com</p></div> <div class="footer-right" data-v-497fb04d></div></div><!----></div></div>
    <script src="/vuepress-blog-lxh/assets/js/app.8d32188a.js" defer></script><script src="/vuepress-blog-lxh/assets/js/2.ae6c3983.js" defer></script><script src="/vuepress-blog-lxh/assets/js/15.a80cddf5.js" defer></script><script src="/vuepress-blog-lxh/assets/js/6.b516d596.js" defer></script>
  </body>
</html>
